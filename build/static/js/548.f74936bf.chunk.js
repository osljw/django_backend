"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[548],{44548:function(e,n,o){o.r(n),o.d(n,{default:function(){return d}});var t=o(29439),r=o(72791),s=o(66106),l=o(30914),i=o(83099),a=o(87309),c=o(53655),f=o(80184),u=function(){for(var e=r.useRef(null),n=19,o=20,u=10,h=(0,r.useState)("\u9ed1\u65b9"),g=(0,t.Z)(h,2),v=g[0],d=g[1],p=new Array(n),x=0;x<n;x++){p[x]=new Array(n);for(var j=0;j<n;j++)p[x][j]=0}var Z=(0,r.useState)(p),m=(0,t.Z)(Z,2),w=m[0],k=m[1],S=(0,r.useState)(!1),y=(0,t.Z)(S,2),C=y[0],b=y[1],P=(0,r.useState)(!1),I=(0,t.Z)(P,2),M=I[0],T=I[1],_=function(){var t=e.current.getContext("2d");t.fillStyle="green",t.fillRect(0,0,t.canvas.width,t.canvas.height),function(e){e.beginPath();for(var t=0;t<n;t++)e.moveTo(u+t*o,u),e.lineTo(u+t*o,370),e.moveTo(u,u+t*o),e.lineTo(370,u+t*o);e.stroke()}(t),k(p),b(!1)};(0,r.useEffect)((function(){_()}),[]);return(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(l.Z,{offset:8,span:16}),(0,f.jsx)(l.Z,{offset:8,span:16,children:(0,f.jsxs)(i.Z,{direction:"vertical",children:[(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(a.ZP,{type:"primary",onClick:_,children:" \u5f00\u59cb "}),C?(0,f.jsxs)(c.Z,{children:[" Winner: ",M," "]}):null]}),(0,f.jsx)("canvas",{ref:e,height:"400px",width:"400px",color:"green",onClick:function(r){if(C)alert("\u6e38\u620f\u7ed3\u675f");else{console.log("onClick execute: ",r);for(var s,l,i,a,c=e.current.getContext("2d"),f=function(e,n){var o=e.getBoundingClientRect();return[n.clientX-o.left,n.clientY-o.top]}(e.current,r),h=(0,t.Z)(f,2),g=h[0],p=h[1],x=0;x<n;x++){var j=u+x*o;Math.abs(g-j)<10&&(s=j,i=x),Math.abs(p-j)<10&&(l=j,a=x)}if(0===w[i][a]){!function(e,n,o,t,r,s){0===n[o][t]&&(e.beginPath(),"\u767d\u65b9"===v?(e.fillStyle="white",e.arc(r,s,10,0,2*Math.PI,!1),e.stroke(),n[o][t]=1):(e.fillStyle="black",e.arc(r,s,10,0,2*Math.PI,!1),e.stroke(),n[o][t]=2),d("\u9ed1\u65b9"===v?"\u767d\u65b9":"\u9ed1\u65b9"),k(n),e.fill())}(c,w.slice(),i,a,s,l);!function(e,o,t){(function(e,o){console.log("matrix: ",w);for(var t=0;t<5;t++){var r=e-t,s=o-t;if(!(r<0||s<0||r+4>n||s+4>n)&&0!==w[r][s]&&w[r][s]===w[r+1][s+1]&&w[r][s]===w[r+2][s+2]&&w[r][s]===w[r+3][s+3]&&w[r][s]===w[r+4][s+4])return console.log("\u4e3b\u5bf9\u89d2\u7ebf win"),!0}for(var l=0;l<5;l++){var i=e-l,a=o+l;if(!(i<0||a<0||i+4>n||a+4>n)&&0!==w[i][a]&&w[i][a]===w[i+1][a-1]&&w[i][a]===w[i+2][a-2]&&w[i][a]===w[i+3][a-3]&&w[i][a]===w[i+4][a-4])return console.log("\u4e3b\u5bf9\u89d2\u7ebf win"),!0}for(var c=0;c<5;c++){var f=e-c,u=o;if(console.log("pos: ",f,u),!(f<0||u<0||f+4>n||u+4>n)&&0!==w[f][u]&&w[f][u]===w[f+1][u]&&w[f][u]===w[f+2][u]&&w[f][u]===w[f+3][u]&&w[f][u]===w[f+4][u])return console.log("\u6a2a\u7ebf win"),!0}for(var h=0;h<5;h++){var g=e,v=o-h;if(console.log("pos: ",g,v),!(g<0||v<0||g+4>n||v+4>n)&&0!==w[g][v]&&w[g][v]===w[g][v+1]&&w[g][v]===w[g][v+2]&&w[g][v]===w[g][v+3]&&w[g][v]===w[g][v+4])return console.log("\u6a2a\u7ebf win"),!0}return!1})(o,t)&&(console.log("winner is:",e,o,t),b(!0),T(e))}(v,i,a),C&&console.log("winner is:",M)}else alert("\u5df2\u6709\u843d\u5b50")}},children:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301canvas\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668\uff01"})]})})]})},h=o(78792),g=o(22266),v=o(16871);function d(){var e=(0,r.useState)(null),n=(0,t.Z)(e,2),o=(n[0],n[1]),i=(0,r.useState)([]),a=(0,t.Z)(i,2),c=a[0],d=a[1];return(0,r.useEffect)((function(){var e=new WebSocket("ws://localhost:8000/ws/game");e.onopen=function(e){console.log("onopen: ",e)},e.onmessage=function(e){console.log("onmessage:",e);var n=JSON.parse(e.data);if(console.log("receive:",n),"chat_login"===n.type)console.log("chat_login:",n.msg),d(n.msg)},e.onerror=function(e){console.log("onerror: ",e)},o(e)}),[]),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(l.Z,{span:4,children:(0,f.jsx)(h.ZP,{itemLayout:"horizontal",dataSource:c,renderItem:function(e){return(0,f.jsx)(h.ZP.Item,{children:(0,f.jsx)(h.ZP.Item.Meta,{avatar:(0,f.jsx)(g.C,{src:"https://joeschmoe.io/api/v1/random"}),title:(0,f.jsx)("a",{href:"https://ant.design",children:e.client}),description:e.ua})})}})}),(0,f.jsx)(l.Z,{span:4,children:(0,f.jsx)(v.j3,{})}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(u,{})})]})}}}]);
//# sourceMappingURL=548.f74936bf.chunk.js.map