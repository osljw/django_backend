{"version":3,"file":"static/js/380.2c140885.chunk.js","mappings":"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","sources":["view/LayoutPro.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { PageContainer, ProLayout, ProCard } from \"@ant-design/pro-components\";\r\nimport { Button, message } from \"antd\";\r\nimport { Link, Outlet, useLocation } from \"react-router-dom\";\r\nimport { Row, Col, Input, Typography, Modal } from \"antd\";\r\n\r\nimport { post_leaderboard, put_leaderboard } from \"../request/api\";\r\nimport \"./LayoutPro.module.css\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst menuData = [\r\n  // {\r\n  //   path: \"/\",\r\n  //   name: \"首页\",\r\n  // },\r\n  // {\r\n  //   path: \"/article\",\r\n  //   name: \"文章\",\r\n  // },\r\n  // {\r\n  //   path: \"/room\",\r\n  //   name: \"房间\",\r\n  // },\r\n  // {\r\n  //   path: \"/museum\",\r\n  //   name: \"博物馆\",\r\n  // },\r\n  // {\r\n  //   path: \"/login\",\r\n  //   name: \"登录\",\r\n  // },\r\n  // {\r\n  //   path: \"/game\",\r\n  //   name: \"游戏\",\r\n  // },\r\n  // {\r\n  //   path: \"/chat\",\r\n  //   name: \"聊天\",\r\n  // },\r\n  // {\r\n  //   path: \"/upload\",\r\n  //   name: \"上传\",\r\n  // },\r\n  {\r\n    path: \"/scan\",\r\n    name: \"寻宝互动\",\r\n  },\r\n  {\r\n    path: \"/leaderboard\",\r\n    name: \"排行榜\",\r\n  },\r\n];\r\n\r\nexport default () => {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const [messageApi, contextHolder] = message.useMessage();\r\n  const [showCard, setShowCard] = useState(false);\r\n  const [username, setUsername] = useState(localStorage.getItem(\"username\"));\r\n\r\n  const score = localStorage.getItem(\"score\");\r\n\r\n  const handleMenuCollapse = (payload) => {\r\n    setCollapsed(payload);\r\n  };\r\n\r\n  function handleShowCardClick() {\r\n    setShowCard(!showCard);\r\n  }\r\n  const handleCardOk = () => {\r\n    setShowCard(false);\r\n  };\r\n  const handleCardCancel = () => {\r\n    setShowCard(false);\r\n  };\r\n\r\n  const handleUsernameChange = (event) => {\r\n    event.preventDefault();\r\n\r\n    console.log(\"name:\", event.target.value);\r\n    setUsername(event.target.value);\r\n    localStorage.setItem(\"username\", event.target.value);\r\n  };\r\n\r\n  const handleUserPost = () => {\r\n    const uuid = localStorage.getItem(\"uuid\");\r\n    const username = localStorage.getItem(\"username\");\r\n    const score = localStorage.getItem(\"score\");\r\n    console.log(\"uuid\", uuid, \"username:\", username, score);\r\n\r\n    // if (!score) {\r\n    //   messageApi.open({\r\n    //     type: 'error',\r\n    //     content: '请先作答后再提交',\r\n    //   });\r\n    //   return\r\n    // }\r\n\r\n      if (!username) {\r\n      messageApi.open({\r\n        type: 'error',\r\n        content: '请输入您的昵称后提交',\r\n      });\r\n      return\r\n    }\r\n\r\n    if (uuid !== null) {\r\n      put_leaderboard({\r\n        id: uuid,\r\n        username: username,\r\n        score: score,\r\n      })\r\n        .then((response) => {\r\n          messageApi.open({\r\n            type: \"success\",\r\n            content: \"恭喜提交成功\",\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"put user leaderboard error:\", error);\r\n          messageApi.open({\r\n            type: \"error\",\r\n            content: \"提交失败，稍后请重试 \" + error.message,\r\n          });\r\n        });\r\n    } else {\r\n      post_leaderboard({\r\n        username: username,\r\n        score: score,\r\n      })\r\n        .then((data) => {\r\n          console.log(\"post response data:\", data);\r\n          localStorage.setItem(\"uuid\", data.id);\r\n          messageApi.open({\r\n            type: \"success\",\r\n            content: \"恭喜提交成功\",\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"post user leaderboard error:\", error);\r\n          messageApi.open({\r\n            type: \"error\",\r\n            content: \"提交失败，稍后请重试 \" + error.message,\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  const settings = {\r\n    title: \"layout_title\",\r\n    layout: \"top\",\r\n    fixSiderbar: true,\r\n    splitMenus: true,\r\n  };\r\n\r\n  const pathname = useLocation().pathname;\r\n  console.log(\"layout pathname:\", pathname);\r\n\r\n  return (\r\n    <ProLayout\r\n      fixedHeader\r\n      logo=\"/static/logo/ycbwg_logo.jpeg\"\r\n      contentStyle={{ paddingInline: \"0 0px\" }}\r\n      {...settings}\r\n      location={{\r\n        pathname: pathname,\r\n      }}\r\n      onCollapse={handleMenuCollapse}\r\n      collapsed={collapsed}\r\n      // route={{\r\n      //   routes: menuData,\r\n      // }}\r\n      menuDataRender={() => menuData}\r\n      menuItemRender={(itemProps, defaultDom) => {\r\n        if (itemProps.isUrl || itemProps.children || !itemProps.path) {\r\n          return defaultDom;\r\n        }\r\n        return (\r\n          <Link\r\n            to={itemProps.path}\r\n            onClick={() => {\r\n              setCollapsed(true);\r\n            }}\r\n          >\r\n            {\" \"}\r\n            {defaultDom}{\" \"}\r\n          </Link>\r\n        );\r\n      }}\r\n      actionsRender={(props) => {\r\n        // if (props.isMobile) return [];\r\n        return [\r\n          // <Button> 登录 </Button>,\r\n          <Button onClick={handleShowCardClick}> 提交 </Button>,\r\n        ];\r\n      }}\r\n    >\r\n      {/* <PageContainer\r\n        header={{\r\n          title: \"\",\r\n          breadcrumb: {},\r\n        }}\r\n        style={{width:\"100%\", backgroundColor: \"green\", paddingInline: \"0px\" }}\r\n      > */}\r\n\r\n      <Outlet />\r\n      {contextHolder}\r\n      {/* </PageContainer> */}\r\n\r\n      <Modal\r\n        title=\"挑战进度\"\r\n        open={showCard}\r\n        onOk={handleCardOk}\r\n        onCancel={handleCardCancel}\r\n      >\r\n        <Row align=\"middle\">\r\n          <Col span={16}>\r\n            <Input\r\n              placeholder=\"输入您的姓名\"\r\n              value={username}\r\n              onChange={handleUsernameChange}\r\n            />\r\n          </Col>\r\n          <Col span={6} offset={2}>\r\n            <Text> 分数: {score} </Text>\r\n          </Col>\r\n        </Row>\r\n        <Row justify=\"center\">\r\n          <Button\r\n            onClick={handleUserPost}\r\n            style={{ marginBottom: \"20px\", marginTop: \"20px\" }}\r\n          >\r\n            提交分数\r\n          </Button>\r\n        </Row>\r\n      </Modal>\r\n    </ProLayout>\r\n  );\r\n};\r\n"],"names":["Text","Typography","menuData","path","name","useState","collapsed","setCollapsed","message","messageApi","contextHolder","showCard","setShowCard","localStorage","getItem","username","setUsername","score","handleShowCardClick","pathname","useLocation","console","log","ProLayout","fixedHeader","logo","contentStyle","paddingInline","title","layout","fixSiderbar","splitMenus","location","onCollapse","payload","menuDataRender","menuItemRender","itemProps","defaultDom","isUrl","children","to","onClick","actionsRender","props","open","onOk","onCancel","align","span","placeholder","value","onChange","event","preventDefault","target","setItem","offset","justify","uuid","put_leaderboard","id","then","response","type","content","catch","error","post_leaderboard","data","style","marginBottom","marginTop"],"sourceRoot":""}