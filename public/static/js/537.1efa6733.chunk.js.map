{"version":3,"file":"static/js/537.1efa6733.chunk.js","mappings":"6SAqMA,MAvLA,WACE,IAAMA,GAAQC,EAAAA,EAAAA,IAAS,eACjBC,GAAWC,EAAAA,EAAAA,MACjB,GAAoCC,EAAAA,EAAAA,UAAS,CAAC,GAA9C,eAAOC,EAAP,KAAmBC,EAAnB,KAEA,GAAgCF,EAAAA,EAAAA,UAAS,CACvC,CAAEG,KAAM,GAAIC,OAAQ,GAAIC,QAAS,MADnC,eAGA,GAHA,WAGsBL,EAAAA,EAAAA,UAAS,OAA/B,eAAOM,EAAP,KAqDA,OArDA,KAEAC,QAAQC,IAAI,aAAZ,kBAAqCZ,EAAMa,OAAOC,IAAMJ,IAExDK,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,IAAWhB,EAAMa,OAAOC,IAAIG,MAAK,SAACC,GAChCP,QAAQC,IAAI,kBAAmBM,GAC/BZ,EAAcY,EACf,GACF,GAAE,CAAClB,EAAMa,OAAOC,KA4CsB,IAAnCK,OAAOC,KAAKf,GAAYgB,QAExB,+BACE,UAAC,IAAD,CAAKC,MAAO,CAAEC,QAAS,OAAQC,WAAY,SAAUC,QAAS,QAA9D,WACE,SAAC,IAAD,CAAKC,KAAM,EAAX,UACE,SAAC,KAAD,CACEC,KAAK,QACLC,MAAM,SACNC,QAAS,kBAAM3B,GAAU,EAAhB,EACT4B,MAAM,SAACC,EAAA,EAAD,SAGV,SAAC,IAAD,CAAKL,KAAM,GAAX,UACE,eAAIJ,MAAO,CAAEU,OAAQ,SAArB,sDAQR,iCACE,UAAC,IAAD,CAAKV,MAAO,CAAEC,QAAS,OAAQC,WAAY,SAAUC,QAAS,QAA9D,WACE,SAAC,IAAD,CAAKC,KAAM,EAAX,UACE,SAAC,KAAD,CACEC,KAAK,QACLC,MAAM,SACNC,QAAS,kBAAM3B,GAAU,EAAhB,EACT4B,MAAM,SAACC,EAAA,EAAD,SAGV,SAAC,IAAD,CAAKL,KAAM,GAAX,UACE,eAAIJ,MAAO,CAAEU,OAAQ,SAArB,SAAiC3B,EAAW4B,cAIhD,SAAC,IAAD,CACEC,WAAS,EACTC,OACE,gBACEC,IAAI,UACJC,IAAK,wBAA0BhC,EAAWiC,YAC1ChB,MAAO,CAAEiB,MAAO,UAGpBC,QAAS,EACP,iBACElB,MAAO,CACLC,QAAS,OACTkB,eAAgB,eAChBjB,WAAY,SACZe,MAAO,QALX,WAQE,0BAEE,eAAGjB,MAAO,CAAEoB,SAAU,GAAIC,WAAY,OAAQC,MAAO,OAArD,kBAAiEvC,EAAWwC,MAA5E,UAGF,SAAC,KAAD,CAAQC,KAAK,UAAsBjB,QAxFpB,WACvBkB,OAAOC,KAAK,sDA0Bb,EA6DS,qCAA2B,aAvBjC,UA8BE,SAAC,IAAD,CACEC,cAAe,CAACC,UAAU,GAC1BC,MAAO9C,EAAW+C,kBAoD3B,C","sources":["view/travel/TravelDetail.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useMatch, useNavigate } from \"react-router-dom\";\r\n\r\nimport { message } from \"antd\";\r\nimport { Row, Col, Card, Button, Form, Input } from \"antd\";\r\nimport { LeftOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-react\";\r\n\r\nimport service from \"../../request\";\r\nimport Markdown from \"../../component/Markdown\";\r\nimport { get_travel, post_order, post_pay } from \"../../request/api\";\r\nimport ExternalContent from \"../../component/ExternalContent\";\r\n\r\nfunction TravelDetail() {\r\n  const match = useMatch(\"/travel/:id\")\r\n  const navigate = useNavigate()\r\n  const [travelInfo, setTravelInfo] = useState({})\r\n\r\n  const [formList, setFormList] = useState([\r\n    { name: \"\", idCard: \"\", contact: \"\" },\r\n  ]);\r\n  const [url, setUrl] = useState(null);\r\n\r\n  console.log(\"travel id:\", `/travel/${match.params.id}`, url);\r\n\r\n  useEffect(() => {\r\n    get_travel(match.params.id).then((res) => {\r\n      console.log(\"request=travel:\", res);\r\n      setTravelInfo(res);\r\n    });\r\n  }, [match.params.id]);\r\n\r\n  const handleAddForm = () => {\r\n    setFormList([...formList, { name: \"\", idCard: \"\", contact: \"\" }]);\r\n  };\r\n  const handleDeleteForm = (index) => {\r\n    const list = [...formList];\r\n    list.splice(index, 1);\r\n    setFormList(list);\r\n  };\r\n\r\n  const handleSubmit = (values) => {\r\n    console.log(\"onSubmit: \", values);\r\n  };\r\n\r\n  const handleOrderClick = () => {\r\n    window.open(\"https://work.weixin.qq.com/kfid/kfc8c77be471c91d1d7\");\r\n\r\n    // if (formList.length === 0) {\r\n    //   message.error('请至少添加一位人员');\r\n    //   return\r\n    // }\r\n\r\n    //\r\n    const order_info = {\r\n      date_ordered: \"2023-05-29T00:42:36.350486Z\",\r\n      quantity: 1,\r\n      total_price: \"100.00\",\r\n      date_used: \"2023-05-29\",\r\n      user: 1,\r\n      travel: 2,\r\n      persons: [2],\r\n    };\r\n\r\n    // post_order(order_info)\r\n    //   .then((res) => {\r\n    //     //   navigate('/pay', { state: { orderString: res.orderString } });\r\n    //     console.log(\"post order return:\", res);\r\n    //     // window.open(res.pay_url);\r\n    //     navigate(`/order/${res.id}`, { state: { orderInfo: res } });\r\n    //   })\r\n    //   .catch(() => { })\r\n  };\r\n\r\n  if (Object.keys(travelInfo).length === 0) {\r\n    return (\r\n      <>\r\n        <Row style={{ display: \"flex\", alignItems: \"center\", padding: \"16px\" }}>\r\n          <Col span={8}>\r\n            <Button\r\n              size=\"large\"\r\n              shape=\"circle\"\r\n              onClick={() => navigate(-1)}\r\n              icon={<LeftOutlined />}\r\n            />\r\n          </Col>\r\n          <Col span={16}>\r\n            <h1 style={{ margin: \"8 8px\" }}> 内容未找到 </h1>\r\n          </Col>\r\n        </Row>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row style={{ display: \"flex\", alignItems: \"center\", padding: \"16px\" }}>\r\n        <Col span={8}>\r\n          <Button\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            onClick={() => navigate(-1)}\r\n            icon={<LeftOutlined />}\r\n          />\r\n        </Col>\r\n        <Col span={16}>\r\n          <h1 style={{ margin: \"8 8px\" }}>{travelInfo.title}</h1>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Card\r\n        hoverable\r\n        cover={\r\n          <img\r\n            alt=\"product\"\r\n            src={\"http://127.0.0.1:8000\" + travelInfo.cover_image}\r\n            style={{ width: \"100%\" }}\r\n          />\r\n        }\r\n        actions={[\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-around\",\r\n              alignItems: \"center\",\r\n              width: \"100%\",\r\n            }}\r\n          >\r\n            <div>\r\n              {/* 显示价格的部分 */}\r\n              <p style={{ fontSize: 18, fontWeight: \"bold\", color: \"red\" }}>¥ {travelInfo.price} </p>\r\n            </div>\r\n\r\n            <Button type=\"primary\" key=\"order\" onClick={handleOrderClick}>\r\n              微信咨询\r\n            </Button>\r\n          </div>,\r\n        ]}\r\n      >\r\n\r\n        <Editor\r\n          defaultConfig={{readOnly: true}}\r\n          value={travelInfo.description}\r\n        />\r\n\r\n        {/* <Form onFinish={handleSubmit}>\r\n          {formList.map((item, index) => (\r\n            <Card\r\n              key={index}\r\n              title={`人员 ${index + 1}`}\r\n              extra={\r\n                <Button type=\"link\" onClick={() => handleDeleteForm(index)}>\r\n                  <DeleteOutlined />\r\n                </Button>\r\n              }\r\n              style={{ marginBottom: \"20px\" }}\r\n            >\r\n  \r\n              <Form.Item\r\n                label=\"姓名\"\r\n                name={[\"formList\", index, \"name\"]}\r\n                labelCol={{ span: 4 }}\r\n                wrapperCol={{ span: 20 }}\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                label=\"身份证号\"\r\n                name={[\"formList\", index, \"idCard\"]}\r\n                labelCol={{ span: 4 }}\r\n                wrapperCol={{ span: 20 }}\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item\r\n                label=\"联系方式\"\r\n                name={[\"formList\", index, \"contact\"]}\r\n                labelCol={{ span: 4 }}\r\n                wrapperCol={{ span: 20 }}\r\n              >\r\n                <Input />\r\n              </Form.Item>\r\n \r\n            </Card>\r\n          ))}\r\n          <Form.Item>\r\n            <Button type=\"primary\" onClick={handleAddForm}>\r\n              新增人员\r\n            </Button>\r\n          </Form.Item>\r\n        </Form> */}\r\n      </Card>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TravelDetail;\r\n"],"names":["match","useMatch","navigate","useNavigate","useState","travelInfo","setTravelInfo","name","idCard","contact","url","console","log","params","id","useEffect","get_travel","then","res","Object","keys","length","style","display","alignItems","padding","span","size","shape","onClick","icon","LeftOutlined","margin","title","hoverable","cover","alt","src","cover_image","width","actions","justifyContent","fontSize","fontWeight","color","price","type","window","open","defaultConfig","readOnly","value","description"],"sourceRoot":""}