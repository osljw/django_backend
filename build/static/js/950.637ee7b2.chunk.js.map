{"version":3,"file":"static/js/950.637ee7b2.chunk.js","mappings":"mLAiEA,UA5DA,WACE,IAAQA,GAAOC,EAAAA,EAAAA,MAAPD,GAEFE,IADWC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,OAEjBC,QAAQC,IAAI,MAAON,GAEnB,MAAkCO,EAAAA,SAAe,MAAjD,eAAOC,EAAP,KAAkBC,EAAlB,KAmCA,OAjCAF,EAAAA,WAAgB,WAAO,IAAD,EAIdG,EAAU,OAAGR,QAAH,IAAGA,GAAH,UAAGA,EAAUS,aAAb,aAAG,EAAiBH,UAEpCH,QAAQC,IAAI,aAAcI,GAEtBA,EACFD,EAAaC,IAGbE,EAAAA,EAAAA,IAAgBZ,GACba,MAAK,SAACC,GACLL,EAAaK,EACd,IACAC,OAAM,WAAQ,GAEpB,GAAE,KAgBD,4BACE,yCACCP,IACC,iCACE,gCAAQA,EAAUR,OAIlB,SAAC,KAAD,CAAQgB,KAAK,UAAsBC,QAtBpB,YACrBC,EAAAA,EAAAA,IAASV,GAAWK,MAAK,SAACC,GACxBT,QAAQC,IAAI,OAAQQ,GAEpBK,OAAOC,KAAKN,EAAIO,QACjB,GACF,EAgBO,yBAA2B,cAOpC,C","sources":["view/travel/OrderDetail.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\r\nimport { Button } from 'antd';\r\nimport { get_order_by_id, post_pay } from \"../../request/api\";\r\n\r\nfunction OrderDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  console.log(\"id:\", id);\r\n  //   const [isLoading, setIsLoading] = React.useState(true);\r\n  const [orderInfo, setOrderInfo] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    // 获取从源组件传递的状态信息\r\n    // const state = navigate?.getState?.();\r\n    //   const torderInfo = state?.orderInfo;\r\n    const torderInfo = location?.state?.orderInfo;\r\n\r\n    console.log(\"orderInfo:\", torderInfo);\r\n\r\n    if (torderInfo) {\r\n      setOrderInfo(torderInfo);\r\n    } else {\r\n      // // 如果没有在 navigate 中传递状态，则检索订单信息\r\n      get_order_by_id(id)\r\n        .then((res) => {\r\n          setOrderInfo(res);\r\n        })\r\n        .catch(() => {});\r\n    }\r\n  }, []);\r\n\r\n  const handlePayClick = () => {\r\n    post_pay(orderInfo).then((res) => {\r\n      console.log(\"res:\", res);\r\n      // setUrl(res.pay_url);\r\n      window.open(res.pay_url);\r\n    });\r\n  };\r\n\r\n  //   // 显示订单信息\r\n  //   if (isLoading) {\r\n  //     return <div>Loading...</div>;\r\n  //   }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Payment Page</h1>\r\n      {orderInfo && (\r\n        <>\r\n          <p>ID: {orderInfo.id}</p>\r\n          {/* <p>Product: {orderInfo.productName}</p>\r\n          <p>Amount: {orderInfo.amount}</p> */}\r\n\r\n          <Button type=\"primary\" key=\"order\" onClick={handlePayClick}>\r\n            支付\r\n          </Button>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderDetail;\r\n"],"names":["id","useParams","location","useNavigate","useLocation","console","log","React","orderInfo","setOrderInfo","torderInfo","state","get_order_by_id","then","res","catch","type","onClick","post_pay","window","open","pay_url"],"sourceRoot":""}